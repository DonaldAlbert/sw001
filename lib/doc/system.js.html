<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: system.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: system.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict';

/**
	Exports the main object of the CMS. This is the object that holds the primary
	parts of the system (e.g. the Koa's app object).
	
	@module system
*/

var koa = require('koa')
	, app = koa();


module.exports = {
	/**
	* 
	*/
	root: __dirname + '/..',
	app: app,
	sites: [],
	localFile: function(filename) { return this.root + '/' + filename; },
	
	/**
	*	Use this function to check if the ports of the local computer are ready to 
	*	listen.
	*	
	*	@param {number|number[]} The port number(s) to be checked.
	*	
	*	@returns {Promise} A promise that returns no value on sucess or the err
	* 	object on error.
	*/
	checkPorts: function(ports) {
		if( Array.isArray(port) ) {
			var t = this
				, result;
			
			result = port.map( t.checkPort );
			
			return Promise.all(result);
		}
	

		var promise = new Promise( function(resolve, reject) {
			var net = require('net')
				, tester;
			
			tester = net.createServer()
				.once('error', function (err) {	console.log('Port '+port+': '+err); reject(err); }) // err.code != 'EADDRINUSE'
				.once('listening', function() {
					tester.once('close', function() { console.log('Port '+port+': ready.'); resolve(true); })
					.close();
				})
				.listen(port)
		});
		
		return promise;
	},
	
	
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-bootstrap.html">bootstrap</a></li><li><a href="module-site.html">site</a></li><li><a href="module-system.html">system</a></li></ul><h3>Classes</h3><ul><li><a href="module-site-Site.html">Site</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.2</a> on Mon Aug 24 2015 22:03:55 GMT+0300 (EEST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
